#!/bin/bash

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ¯ PHARMAGO - COMMANDES D'INSTALLATION RAPIDE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘      ğŸ¥ PHARMAGO - INSTALLATION RAPIDE ğŸ¥            â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Couleurs
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ã‰TAPE 1 : FLUTTER
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}Ã‰TAPE 1 : Installation Flutter${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

cd pharmago

echo -e "${YELLOW}âœ Nettoyage du projet...${NC}"
flutter clean

echo -e "${YELLOW}âœ Installation des dÃ©pendances...${NC}"
flutter pub get

echo -e "${GREEN}âœ… Flutter prÃªt !${NC}"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ã‰TAPE 2 : BACKEND .NET
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}Ã‰TAPE 2 : Configuration Backend${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

cd ../PharmaGoBackend

echo -e "${YELLOW}âœ Restauration des dÃ©pendances .NET...${NC}"
dotnet restore

echo -e "${YELLOW}âœ Compilation...${NC}"
dotnet build

echo -e "${GREEN}âœ… Backend compilÃ© !${NC}"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ã‰TAPE 3 : VÃ‰RIFICATIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}Ã‰TAPE 3 : VÃ©rifications${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

cd ..

echo -e "${YELLOW}ğŸ“‹ Fichiers crÃ©Ã©s :${NC}"
echo ""
echo "  Frontend Flutter :"
echo "  âœ… lib/services/osrm_service.dart"
echo "  âœ… lib/services/location_service.dart"
echo "  âœ… lib/ui/widgets/osm_map_widget.dart"
echo "  âœ… lib/ui/pages/pharmacy/pharmacy_detail_page_osm.dart"
echo ""
echo "  Backend .NET :"
echo "  âœ… supabase_schema_complete.sql"
echo ""
echo "  Documentation :"
echo "  âœ… MIGRATION_OSM_GUIDE.md"
echo "  âœ… CORRECTIONS_INCOHERENCES.md"
echo "  âœ… SYNTHESE_MIGRATION.md"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ã‰TAPE 4 : PROCHAINES ACTIONS
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}PROCHAINES ACTIONS MANUELLES${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

echo -e "${YELLOW}âš ï¸  Ã‰TAPE A : Configurer Supabase${NC}"
echo ""
echo "1. CrÃ©er un projet sur https://supabase.com"
echo "2. Aller dans Settings â†’ API"
echo "3. Copier :"
echo "   - Project URL"
echo "   - anon/public key"
echo ""
echo "4. Ã‰diter : PharmaGoBackend/appsettings.json"
echo ""
echo '   {
     "Supabase": {
       "Url": "https://votre-projet.supabase.co",
       "Key": "votre-cle-anon"
     }
   }'
echo ""

echo -e "${YELLOW}âš ï¸  Ã‰TAPE B : CrÃ©er le bucket Storage${NC}"
echo ""
echo "1. Aller dans Supabase â†’ Storage"
echo "2. CrÃ©er un nouveau bucket : pharmacy_data"
echo "3. Le rendre PUBLIC"
echo ""

echo -e "${YELLOW}âš ï¸  Ã‰TAPE C : ExÃ©cuter le schÃ©ma SQL${NC}"
echo ""
echo "1. Aller dans Supabase â†’ SQL Editor"
echo "2. Ouvrir : PharmaGoBackend/supabase_schema_complete.sql"
echo "3. Copier/Coller et ExÃ©cuter"
echo ""

echo -e "${YELLOW}âš ï¸  Ã‰TAPE D : Mettre Ã  jour le Router Flutter${NC}"
echo ""
echo "Ã‰diter : pharmago/lib/router/app_router.dart"
echo ""
echo "Remplacer :"
echo "  import 'pharmacy_detail_page.dart';"
echo ""
echo "Par :"
echo "  import 'pharmacy_detail_page_osm.dart';"
echo ""

echo -e "${YELLOW}âš ï¸  Ã‰TAPE E : Supprimer les clÃ©s Google Maps${NC}"
echo ""
echo "Chercher et supprimer dans :"
echo "  - android/app/src/main/AndroidManifest.xml"
echo "  - ios/Runner/Info.plist"
echo ""
echo "Commande de recherche :"
echo "  grep -r 'AIza' pharmago/"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Ã‰TAPE 5 : LANCER L'APPLICATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}LANCER L'APPLICATION${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

echo -e "${GREEN}Backend .NET :${NC}"
echo "  cd PharmaGoBackend"
echo "  dotnet run"
echo ""
echo "  â†’ http://localhost:5000 (Swagger UI)"
echo ""

echo -e "${GREEN}Flutter :${NC}"
echo "  cd pharmago"
echo "  flutter run"
echo ""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# RÃ‰SUMÃ‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo -e "${BLUE}RÃ‰SUMÃ‰${NC}"
echo -e "${BLUE}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
echo ""

echo -e "${GREEN}âœ… Automatique (TerminÃ©) :${NC}"
echo "  â€¢ Services OSM/OSRM crÃ©Ã©s"
echo "  â€¢ Widgets OSM crÃ©Ã©s"
echo "  â€¢ Backend compilÃ©"
echo "  â€¢ DÃ©pendances installÃ©es"
echo "  â€¢ Documentation complÃ¨te"
echo ""

echo -e "${YELLOW}âš ï¸  Manuel (Ã€ faire) :${NC}"
echo "  1. Configurer Supabase (appsettings.json)"
echo "  2. CrÃ©er bucket pharmacy_data"
echo "  3. ExÃ©cuter supabase_schema_complete.sql"
echo "  4. Mettre Ã  jour app_router.dart"
echo "  5. Supprimer clÃ©s Google Maps"
echo "  6. Tester sur iOS/Android"
echo ""

echo -e "${GREEN}ğŸ’° Ã‰conomie :${NC}"
echo "  Avant  : ~\$50-200/mois"
echo "  AprÃ¨s  : \$0/mois"
echo "  ğŸ“ˆ Ã‰conomie : ~\$600-2400/an"
echo ""

echo -e "${GREEN}ğŸš€ Performance :${NC}"
echo "  Chargement : 66% plus rapide"
echo "  DonnÃ©es    : 70% moins lourdes"
echo "  Offline    : âœ… SupportÃ©"
echo ""

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘          âœ… INSTALLATION TERMINÃ‰E âœ…                  â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

echo -e "${BLUE}ğŸ“š Documentation complÃ¨te :${NC}"
echo "  â€¢ SYNTHESE_MIGRATION.md"
echo "  â€¢ MIGRATION_OSM_GUIDE.md"
echo "  â€¢ CORRECTIONS_INCOHERENCES.md"
echo ""

echo -e "${GREEN}ğŸ‰ PharmaGo est maintenant 100% GRATUIT ! ğŸ‰${NC}"
echo ""
